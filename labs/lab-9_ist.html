<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lab 9: Independent Samples t-tests</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="lab-9_ist_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab-9_ist_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="lab-9_ist_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="lab-9_ist_files/libs/quarto-html/popper.min.js"></script>
<script src="lab-9_ist_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab-9_ist_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab-9_ist_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab-9_ist_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab-9_ist_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab-9_ist_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab-9_ist_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 9: Independent Samples <em>t</em>-tests</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>You can download the rmd file <a href="lab-9_ist.Rmd">here</a>.</p>
<p>To quickly navigate to the desired section, click one of the following links:</p>
<ol type="1">
<li><a href="#data">Data Description</a></li>
<li><a href="#independent">Independent Samples <em>t</em>-test</a></li>
<li><a href="#minihacks">Minihacks</a></li>
</ol>
<hr>
<section id="data" class="level1">
<h1>The Data</h1>
<p>Today we will be analyzing data from Fox and Guyer’s (1978) anonymity and cooperation study again. The data is included in the <code>{carData}</code> package and you can see information about the data set using <code>?Guyer</code>. Twenty groups of four participants each played 30 trials of the the prisoner’s dilemma game. The number of cooperative choices (<code>cooperation</code>) made by each group were scored out of 120 (i.e., cooperative choices made by 4 participants over 30 trials). The groups either made decisions publicly or privately (<code>condition</code>) and groups were either comprised of all women or all men (<code>sex</code>).</p>
<p>Run the following code to load the data into your global environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> Guyer</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># take a look at the data</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Guyer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cooperation condition    sex
1          49    public   male
2          64    public   male
3          37    public   male
4          52    public   male
5          68    public   male
6          54    public female</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check data structure</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Guyer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   20 obs. of  3 variables:
 $ cooperation: num  49 64 37 52 68 54 61 79 64 29 ...
 $ condition  : Factor w/ 2 levels "anonymous","public": 2 2 2 2 2 2 2 2 2 2 ...
 $ sex        : Factor w/ 2 levels "female","male": 2 2 2 2 2 1 1 1 1 1 ...</code></pre>
</div>
</div>
</section>
<section id="independent" class="level1">
<h1>Independent Samples <em>t</em>-test</h1>
<p>Last time we wanted to compare the mean cooperation level to an experimenter specified level (50% cooperation).</p>
<p>Now, let’s ask a new research question: does whether the decision was made publicly or anonymously have an effect on people’s cooperation levels? For this case, we will use an independent samples <em>t</em>-test, which is used to compare the means of two independent samples.</p>
<section id="the-null-and-alternative-hypotheses" class="level2">
<h2 class="anchored" data-anchor-id="the-null-and-alternative-hypotheses">The null and alternative hypotheses:</h2>
<p>The null hypothesis would be:</p>
<p><span class="math display">\[H_{0}: \mu_1 = \mu_2\]</span></p>
<p>The alternative hypothesis would be:</p>
<p><span class="math display">\[H_{1}: \mu_1 \neq \mu_2\]</span></p>
<section id="assumptions" class="level3">
<h3 class="anchored" data-anchor-id="assumptions">Assumptions</h3>
<p>The assumptions include…</p>
<ol type="1">
<li><em>Normality</em>: Assume that both population distributions are normally distributed.</li>
<li><em>Independence</em>: Assume that the observations within and between groups are independent of each other.</li>
<li><em>Homogeneity of variance</em>: Assume that the population standard deviations of both populations are equal. If you violate this assumption, use <em>Welch’s t-test</em> (which is actually the default in R).</li>
</ol>
</section>
<section id="sampling-distribution-of-differences-between-means" class="level3">
<h3 class="anchored" data-anchor-id="sampling-distribution-of-differences-between-means">Sampling Distribution of Differences Between Means</h3>
<p>Another way of stating the null hypothesis is that, if the two population means are equal, than the <em>difference</em> between the two population means (population mean 1 minus population mean 2) is zero, as shown below:</p>
<p><span class="math display">\[H_{0}: \mu_1 - \mu_2 = 0\]</span></p>
<p>Remember the sampling distribution of means is used to represent the results we would expect to obtain <em>if the null hypothesis is true</em>.</p>
<p>For an independent samples t-test, the sampling distribution is a <em>t</em> distribution that represents all the possible <em>sample mean differences</em> we could expect to obtain if we randomly obtained samples from two populations with <em>equal population means</em> and calculated the difference between each pair of sample means and plotted those sample mean differences in a distribution.</p>
<section id="standard-error-for-students-t-test" class="level4">
<h4 class="anchored" data-anchor-id="standard-error-for-students-t-test">Standard Error for Student’s t-test</h4>
<p>We’ll first talk about how to calculate standard error of the sampling distribution if performing a <em>student’s t-test</em>, which assumes that the population standard deviations are <em>equal</em>.</p>
<p>The <em>standard error of the difference</em>, aka the standard deviation of the sampling distribution of differences between means, is calculated as:</p>
<p><span class="math display">\[\sigma_{d} = \hat{\sigma_{p}} \sqrt{(\frac{1}{N_{1}} + \frac{1}{N_{2}})}\]</span></p>
<p>For student’s t-test (which assumes the standard deviations of the two populations are equal), <span class="math inline">\(\hat{\sigma_{p}}\)</span> is the <em>pooled estimate of the population standard deviation</em> and is calculated as:</p>
<p><span class="math display">\[\hat{\sigma_{p}} = \sqrt{\frac{{{(N_{1} - 1)\hat{\sigma_{1}^{2}} + (N_{2} - 1)\hat{\sigma_{2}^{2}}}}} {N_{1} + N_{2} - 2}}\]</span></p>
<p>For an independent samples t-test, the null hypothesis states that the means of the two populations being compared are equal. Another assumption that <em>student’s</em> version of the independent samples t-test makes is that the <em>standard deviation of the two populations are equal</em>. The pooled estimate of the population standard deviation is a <em>weighted average</em> of the two samples’ estimates of their population standard deviations.</p>
<p>The <em>degrees of freedom</em> for student’s t-test are <em>N1 + N2 - 2</em>.</p>
</section>
<section id="standard-error-for-welchs-t-test" class="level4">
<h4 class="anchored" data-anchor-id="standard-error-for-welchs-t-test">Standard Error for Welch’s t-test</h4>
<p>If you have reason to think that the homogeneity of variances assumption has been violated, you should instead perform <em>welch’s t-test</em>, which does not make this assumption. The main difference between welch’s t-test and student’s t-test is in how the <em>standard error of the difference</em> is calculated. For welch’s t-test, you calculate it as:</p>
<p><span class="math display">\[\sigma_{d} = \sqrt{(\frac{\hat{\sigma_{1}^{2}}}{N_{1}} + \frac{\hat{\sigma_{2}^{2}}}{N_{2}})}\]</span> This measure of standard error will be <strong>slightly larger</strong> than the measure of standard error using student’s t-test, and thus this is a more conservative test (because it will produce a smaller t-test).</p>
<p>The <em>degrees of freedom</em> for welch’s t-test are:</p>
<p><img src="resources\lab9\df_welch_ttest.JPG" class="img-fluid"></p>
</section>
</section>
<section id="the-independent-samples-t-statistic" class="level3">
<h3 class="anchored" data-anchor-id="the-independent-samples-t-statistic">The Independent Samples t-Statistic</h3>
<p>The t-statistic for the independent samples t-test is the <em>difference between our two sample means</em> divided by the <em>standard error of the difference</em>.</p>
<p><span class="math display">\[t = \frac{\bar X_{1} - \bar X_{2}}{\sigma_{d}}\]</span></p>
<p>Which will express, in standard error units, how far away our actually obtained sample mean difference is from the mean of our sampling distribution of differences between means (that represents all the sample mean differences we would expect if the null were <em>true</em>), which lets us see how <em>unlikely</em> our results would be <em>if the null hypothesis is true</em>.</p>
</section>
</section>
<section id="descriptive-statistics" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics">Descriptive Statistics</h2>
<p>First, let’s get descriptive statistics for each condition to see what’s going on. We can get the descriptive statistics separately for the two conditions being compared by using the <code>group_by()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>descriptives <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">mean</span>(cooperation, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(cooperation, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>descriptives</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  condition     n  mean    sd
  &lt;fct&gt;     &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1 anonymous    10  40.9  9.42
2 public       10  55.7 14.8 </code></pre>
</div>
</div>
</section>
<section id="conducting-independent-samples-t-test-in-r" class="level2">
<h2 class="anchored" data-anchor-id="conducting-independent-samples-t-test-in-r">Conducting Independent Samples t-Test in R</h2>
<section id="option-1-t.test" class="level3">
<h3 class="anchored" data-anchor-id="option-1-t.test">Option 1: t.test()</h3>
<section id="students-t-test" class="level4">
<h4 class="anchored" data-anchor-id="students-t-test">Student’s t-test</h4>
<p>As with the one-sample and paired <em>t</em>-tests, we can use the <code>t.test()</code> function from the the built-in <code>{stats}</code> package to conduct an independent samples <em>t</em>-test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">t.test</span>(cooperation <span class="sc">~</span> condition, <span class="at">data =</span> data, <span class="at">var.equal =</span> <span class="cn">TRUE</span>) <span class="co"># Student's t-test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Two Sample t-test

data:  cooperation by condition
t = -2.6615, df = 18, p-value = 0.0159
alternative hypothesis: true difference in means between group anonymous and group public is not equal to 0
95 percent confidence interval:
 -26.482755  -3.117245
sample estimates:
mean in group anonymous    mean in group public 
                   40.9                    55.7 </code></pre>
</div>
</div>
<p>The syntax being used here is similar to how you will perform regression models in R. Whatever comes on the left of the tilde (<code>~</code>) is the dependent variable (in this case, <code>cooperation</code>) and whatever comes on the right of the tilde is the independent variable (in this case, <code>condition</code>).</p>
<p>Since we specified <code>var.equal = TRUE</code> in the <code>t.test()</code> function, it calculated a Student’s <em>t</em>-test. If we had specified <code>var.equal = FALSE</code> (the default for both <code>t.test()</code> and <code>independentSamplesTTest()</code>) we would have calculated a Welch’s <em>t</em>-test. Unlike Student’s <em>t</em>-test, Welch’s <em>t</em>-test does not assume equal variances between groups. To test whether you have violated the homogeneity of variances assumption, you can use <em>Levene’s test</em>, as shown below.</p>
</section>
<section id="welchs-t-test" class="level4">
<h4 class="anchored" data-anchor-id="welchs-t-test">Welch’s t-test</h4>
<p>Let’s first perform Levene’s test to see if we have <em>violated</em> the homogeneity of variances assumption. A <em>significant</em> Levene’s test indicates a violation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leveneTest</span>(cooperation <span class="sc">~</span> condition, <span class="at">data =</span> data, <span class="at">center =</span> <span class="st">"mean"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Levene's Test for Homogeneity of Variance (center = "mean")
      Df F value Pr(&gt;F)
group  1  1.9346 0.1812
      18               </code></pre>
</div>
</div>
<p>Have we violated the homogeneity of variances assumption?</p>
<p>Now, let’s perform Welch’s t-test by setting <code>var.equal = FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(cooperation <span class="sc">~</span> condition, <span class="at">data =</span> data, <span class="at">var.equal =</span> <span class="cn">FALSE</span>) <span class="co"># Welch's t-test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  cooperation by condition
t = -2.6615, df = 15.237, p-value = 0.0176
alternative hypothesis: true difference in means between group anonymous and group public is not equal to 0
95 percent confidence interval:
 -26.636502  -2.963498
sample estimates:
mean in group anonymous    mean in group public 
                   40.9                    55.7 </code></pre>
</div>
</div>
<p>In this case, the t-test was the same for both tests because the homogeneity of variances assumption was not violated.</p>
</section>
</section>
<section id="option-2-independentsamplesttest" class="level3">
<h3 class="anchored" data-anchor-id="option-2-independentsamplesttest">Option 2: independentSamplesTTest()</h3>
<p>We can also use the <code>independentSamplesTTest</code> function in the <code>{lsr}</code> package to get the output with Cohen’s <em>d</em> included.</p>
<p><em>Student’s t-test</em> can be used by setting <code>var.equal = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">independentSamplesTTest</span>(<span class="at">formula   =</span> cooperation <span class="sc">~</span> condition, </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data      =</span> data, </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">var.equal =</span> <span class="cn">TRUE</span>) <span class="co"># Student</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Student's independent samples t-test 

Outcome variable:   cooperation 
Grouping variable:  condition 

Descriptive statistics: 
            anonymous public
   mean        40.900 55.700
   std dev.     9.422 14.848

Hypotheses: 
   null:        population means equal for both groups
   alternative: different population means in each group

Test results: 
   t-statistic:  -2.661 
   degrees of freedom:  18 
   p-value:  0.016 

Other information: 
   two-sided 95% confidence interval:  [-26.483, -3.117] 
   estimated effect size (Cohen's d):  1.19 </code></pre>
</div>
</div>
<p><em>Welch’s t-test</em> can be used by setting <code>var.equal = FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">independentSamplesTTest</span>(<span class="at">formula   =</span> cooperation <span class="sc">~</span> condition, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data      =</span> data, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">var.equal =</span> <span class="cn">FALSE</span>) <span class="co"># Welch</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Welch's independent samples t-test 

Outcome variable:   cooperation 
Grouping variable:  condition 

Descriptive statistics: 
            anonymous public
   mean        40.900 55.700
   std dev.     9.422 14.848

Hypotheses: 
   null:        population means equal for both groups
   alternative: different population means in each group

Test results: 
   t-statistic:  -2.661 
   degrees of freedom:  15.237 
   p-value:  0.018 

Other information: 
   two-sided 95% confidence interval:  [-26.637, -2.963] 
   estimated effect size (Cohen's d):  1.19 </code></pre>
</div>
</div>
</section>
<section id="practice" class="level3">
<h3 class="anchored" data-anchor-id="practice">Practice</h3>
<p>Your turn! What if the research question was ‘do cooperation levels vary by sex?’</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(cooperation <span class="sc">~</span> sex, <span class="at">data =</span> data, <span class="at">var.equal =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Two Sample t-test

data:  cooperation by sex
t = 0.15244, df = 18, p-value = 0.8805
alternative hypothesis: true difference in means between group female and group male is not equal to 0
95 percent confidence interval:
 -12.78236  14.78236
sample estimates:
mean in group female   mean in group male 
                48.8                 47.8 </code></pre>
</div>
</div>
</section>
</section>
<section id="interpretation-and-write-up" class="level2">
<h2 class="anchored" data-anchor-id="interpretation-and-write-up">Interpretation and Write-Up</h2>
<p>Let’s assign the output of the independent samples t-test to an object so we can get APA-style formatted output from it.</p>
<p>Unfortunately, the <code>apa_print()</code> function only works with the <code>t.test()</code> output, and not with the <code>independentSamplesTTest()</code> output. Thus, there will be a few things missing from the output (i.e., M and SD for each condition, measure of effect size).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>ist_results <span class="ot">&lt;-</span> <span class="fu">t.test</span>(cooperation <span class="sc">~</span> condition, <span class="at">data =</span> data, <span class="at">var.equal =</span> <span class="cn">TRUE</span>) <span class="co"># Student's t-test</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">apa_print</span>(ist_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$estimate
[1] "$\\Delta M = -14.80$, 95\\% CI $[-26.48, -3.12]$"

$statistic
[1] "$t(18) = -2.66$, $p = .016$"

$full_result
[1] "$\\Delta M = -14.80$, 95\\% CI $[-26.48, -3.12]$, $t(18) = -2.66$, $p = .016$"

$table
A data.frame with 5 labelled columns:

  estimate        conf.int statistic df p.value
1   -14.80 [-26.48, -3.12]     -2.66 18    .016

estimate : $\\Delta M$ 
conf.int : 95\\% CI 
statistic: $t$ 
df       : $\\mathit{df}$ 
p.value  : $p$ 
attr(,"class")
[1] "apa_results" "list"       </code></pre>
</div>
</div>
<p>A proper write-up for our Independent Sample <em>t</em>-test would be:</p>
<p>Cooperation in the public condition (<em>M</em> = 55.70, <em>SD</em> = 14.84) was much greater than cooperation in the anonymous condition (<em>M</em> = 40.90, <em>SD</em> = 9.42), <em>t</em>(18) = 2.66, <em>p</em> = .018, 95% CI [-26.64,-3.12], <em>d</em> = 1.19.</p>
<p>Or, if you want to use the apa_print() output:</p>
<p>Cooperation in the public condition (<em>M</em> = 55.70, <em>SD</em> = 14.84) was much greater than cooperation in the anonymous condition (<em>M</em> = 40.90, <em>SD</em> = 9.42), <span class="math inline">\(t(18) = -2.66\)</span>, <span class="math inline">\(p = .016\)</span>, 95% CI [-26.48, -3.12], <em>d</em> = 1.19.</p>
</section>
<section id="plotting-an-independent-samples-t-test" class="level2">
<h2 class="anchored" data-anchor-id="plotting-an-independent-samples-t-test">Plotting an Independent Samples <em>t</em>-test</h2>
<p>We can quickly plot our means and 95% confidence interval using the <code>ggerrorplot()</code> function in the <code>{ggpubr}</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggerrorplot</span>(data, </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">x         =</span> <span class="st">"condition"</span>, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">y         =</span> <span class="st">"cooperation"</span>, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">desc_stat =</span> <span class="st">"mean_ci"</span>, </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">color     =</span> <span class="st">"condition"</span>, </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">ylab      =</span> <span class="st">"Cooperation"</span>) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add results of the t.test</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_compare_means</span>(<span class="at">method =</span> <span class="st">"t.test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-9_ist_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Change the ‘desc_stat’ parameter if you want to plot a different type of error bar. Make sure to add a caption, so it is clear what you are plotting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggerrorplot</span>(data, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">x         =</span> <span class="st">"condition"</span>, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">y         =</span> <span class="st">"cooperation"</span>, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">desc_stat =</span> <span class="st">"mean_se"</span>, <span class="co">#change to standard error</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">color     =</span> <span class="st">"condition"</span>, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">ylab      =</span> <span class="st">"Cooperation"</span>) <span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add results of the t.test</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_compare_means</span>(<span class="at">method =</span> <span class="st">"t.test"</span>) <span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add caption</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">'Error bars indicate the SEM.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-9_ist_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="plotting-in-ggplot-using-a-stats-layer" class="level3">
<h3 class="anchored" data-anchor-id="plotting-in-ggplot-using-a-stats-layer">Plotting in ggplot using a stats layer</h3>
<p>Before when we used ggplot, we provided the data and canvas we wanted to plot and then added layers of geoms:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>condition, <span class="at">y=</span>cooperation)) <span class="sc">+</span> <span class="co">#create canvas</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="co">#add geom</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-9_ist_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sometimes you also want to plot some sort of transformation of your data. One way to do that is with stats layers. Here we want to plot summary statistics (mean and CI), so we’ll use ‘stat_summary’:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> condition, <span class="at">y =</span> cooperation)) <span class="sc">+</span> <span class="co">#create canvas</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="fu">aes</span>(<span class="at">color =</span> condition), <span class="at">fun =</span> mean, <span class="co">#specify a function to run on your data</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">geom=</span><span class="st">"point"</span>) <span class="sc">+</span> <span class="co">#here is where you specify what geom to use</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="fu">aes</span>(<span class="at">color =</span> condition), </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.data =</span> mean_ci, <span class="co">#specify a function to run on your data</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">geom=</span><span class="st">"errorbar"</span>,  <span class="co">#here is where you specify what geom to use</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span> <span class="co">#here is where you make the error bars a normal width</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  papaja<span class="sc">::</span><span class="fu">theme_apa</span>(</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_family =</span> <span class="st">"Times New Roman"</span>) <span class="co"># Makes it APA themed :)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-9_ist_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="power-calculations" class="level2">
<h2 class="anchored" data-anchor-id="power-calculations">Power Calculations</h2>
<p>In order to calculate power, one way is to use the ‘pwr’ package. This package has several similar functions for different statistical tests that follow the same general logic. Today we’ll be using ‘pwr.t.test’. This function takes a sample size (n), an effect size estimate (d), an alpha level (sig.level), and a power (power). The key thing is to fill in a value for 1 of those 4 things and then leave the 4th one out to calculate it. You can then specify the type of t-test (type), and whether it is a two-sided or directional test (alternative).</p>
<p>Cool power visualization <a href="https://rpsychologist.com/d3/nhst/">here</a></p>
<p>Here I will make a post-hoc power calculation.</p>
<section id="equal-sample-sizes" class="level3">
<h3 class="anchored" data-anchor-id="equal-sample-sizes">Equal sample sizes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t.test</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="co">#sample size (per group)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">d =</span> <span class="fl">1.19</span>, <span class="co">#Cohen's d</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">sig.level =</span> .<span class="dv">05</span>, <span class="co"># alpha level</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">power =</span> <span class="cn">NULL</span>, <span class="co"># Set what you want to calculate to NULL or leave out entirely</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">'two.sample'</span>, <span class="co">#independent sample t-test</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">alternative =</span> <span class="st">'two.sided'</span>  <span class="co">#two-tailed test</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Two-sample t test power calculation 

              n = 10
              d = 1.19
      sig.level = 0.05
          power = 0.7112416
    alternative = two.sided

NOTE: n is number in *each* group</code></pre>
</div>
</div>
<p>If that is a good estimate of effect size, then our power was .711, even with such a small sample size.</p>
</section>
<section id="unequal-sample-sizes" class="level3">
<h3 class="anchored" data-anchor-id="unequal-sample-sizes">Unequal sample sizes</h3>
<p>In cases where your Ns are unequal, use ‘pwr.t2n.test’</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t2n.test</span>(<span class="at">n1=</span><span class="dv">10</span>, <span class="co">#n of group 1</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">n2=</span><span class="dv">10</span>, <span class="co">#n of group 2</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">d =</span> <span class="fl">1.19</span>, <span class="co">#Cohen's d</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">sig.level =</span> .<span class="dv">05</span>, <span class="co"># alpha level</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">power =</span> <span class="cn">NULL</span>, <span class="co"># Set what you want to calculate to NULL or leave out entirely</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">alternative =</span> <span class="st">'two.sided'</span>  <span class="co">#two-tailed test</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     t test power calculation 

             n1 = 10
             n2 = 10
              d = 1.19
      sig.level = 0.05
          power = 0.7112416
    alternative = two.sided</code></pre>
</div>
</div>
</section>
<section id="practice-1" class="level3">
<h3 class="anchored" data-anchor-id="practice-1">Practice</h3>
<p>Your turn! What sample size do we need to replicate this same effect size with a power of .95?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t.test</span>(<span class="at">n =</span> <span class="cn">NULL</span>, <span class="co">#sample size (per group)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">d =</span> <span class="fl">1.19</span>, <span class="co">#Cohen's d</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">sig.level =</span> .<span class="dv">05</span>, <span class="co"># alpha level</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">power =</span> <span class="fl">0.95</span>, <span class="co"># Set what you want to calculate to NULL or leave out entirely</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">'two.sample'</span>, <span class="co">#independent sample t-test</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">alternative =</span> <span class="st">'two.sided'</span>  <span class="co">#two-tailed test</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Two-sample t test power calculation 

              n = 19.36879
              d = 1.19
      sig.level = 0.05
          power = 0.95
    alternative = two.sided

NOTE: n is number in *each* group</code></pre>
</div>
</div>
<p>One more! What effect size do we need to achieve a power of .9, with 30 participants per group, and an alpha level of .01?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t.test</span>(<span class="at">n =</span> <span class="dv">30</span>, <span class="co">#sample size (per group)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">d =</span> <span class="cn">NULL</span>, <span class="co">#Cohen's d</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">sig.level =</span> .<span class="dv">01</span>, <span class="co"># alpha level</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">power =</span> <span class="fl">0.9</span> , <span class="co"># Set what you want to calculate to NULL or leave out entirely</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">'two.sample'</span>, <span class="co">#independent sample t-test</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">alternative =</span> <span class="st">'two.sided'</span>  <span class="co">#two-tailed test</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Two-sample t test power calculation 

              n = 30
              d = 1.025559
      sig.level = 0.01
          power = 0.9
    alternative = two.sided

NOTE: n is number in *each* group</code></pre>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="minihacks" class="level1">
<h1>Minihacks</h1>
<section id="minihack-1-independent-samples-t-test" class="level2">
<h2 class="anchored" data-anchor-id="minihack-1-independent-samples-t-test">Minihack 1 Independent Samples t-test:</h2>
<p>An intrepid researcher submits a paper on the difference in coding abilities between Mac and PC users. They argue that PC users are better at coding than Mac users. Coding ability was operationalized with a continuous ‘ability’ metric. Despite a growing fear that you are becoming Reviewer 2, you acquire their data through GitHub to check their analyses.</p>
<p>Run the following lines of code to load the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set seed for reproducability</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>data_os <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"id"</span>      <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="fl">1e5</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"os"</span>      <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"pc"</span>, <span class="fl">2e4</span>), </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">rep</span>(<span class="st">"mac"</span>, <span class="fl">8e4</span>)),</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"ability"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="fl">2e4</span>, <span class="dv">15</span>, <span class="dv">90</span>),</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">rnorm</span>(<span class="fl">8e4</span>, <span class="fl">13.9</span>, <span class="dv">1</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Perform an <em>student’s independent samples t-test</em> on the data (using a built in function).</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>After running the code, you think that maybe you should have run a Welch’s <em>t</em>-test instead of a Student’s <em>t</em>-test. Investigate your chosen function to figure out how to perform a Welch’s <em>t</em>-test on the data. Do you find a different result? Why or why not?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Let’s give the researchers the benefit of the doubt and assume the variances of both groups are equal. Is there a <strong>meaningful</strong> difference between Mac and PC users? Use a statistic to provide support for your answer.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li><p>Please report the results of the t-test in APA style (Please use as much inline r code as possible).</p></li>
<li><p>Plot the data using <code>ggerrorplot()</code>. Does this support your answer to question 3?</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="6" type="1">
<li>Recreate this plot using ggplot. Change the y-axis to a range that makes sense.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>7 Use the Cohen’s d to calculate the percentage of overlap between the groups. (See lecture 17)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="8" type="1">
<li>Your colleague doesn’t care about the comparison between PC and Mac users. They are only interested in PC users and whether they differ from an ability level of 14. What should you tell him? What statistical test supports you?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="minihack-2-power" class="level2">
<h2 class="anchored" data-anchor-id="minihack-2-power">Minihack 2: POWER</h2>
<ol type="1">
<li>Find a GIF that represents power and display it using RMarkdown.</li>
</ol>
<p><img src="https://media.giphy.com/media/3o84sq21TxDH6PyYms/giphy.gif" class="img-fluid"></p>
<ol start="2" type="1">
<li>You are planning on running a fourth version of a study comparing how tall plants grow after listening to the Beatles or Mozart when they were seedlings. Previous versions of the study found a Cohen’s d of .1, .6, and .2. You want to replicate this study with a pea plant, but don’t expect pea plants to differ from other plants. How many plants should I plan on including if I want a power of at least .8?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Whoops! I forgot to mention that this a design where pairs of genetically identical plants are sorted into the two conditions. How many pairs of plants do I need?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Write code to extract the sample size needed (round up) and display it embedded in an explanation.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="minihack-3-trouble-shooting" class="level2">
<h2 class="anchored" data-anchor-id="minihack-3-trouble-shooting">Minihack 3: Trouble Shooting</h2>
<p>My advisor told me that I had multiple errors in my code. She told me the line numbers where the errors are, but she thought it would be a good learning experience for me to try to solve the errors myself. I need your help. Fix the errors in the following chunks of code.</p>
<p><strong>Error 1:</strong></p>
<p>I am trying to calculate post-hoc power, but it keeps giving me a strange error message???</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t2n.test</span>(<span class="at">n1=</span><span class="dv">30</span>, <span class="co">#n of group 1</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">n2=</span><span class="dv">20</span>, <span class="co">#n of group 2</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">d =</span> .<span class="dv">5</span>, <span class="co">#Cohen's d</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">sig.level =</span> .<span class="dv">05</span>, <span class="co"># alpha level</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">power =</span> <span class="cn">NULL</span>, <span class="co"># Set what you want to calculate to NULL or leave out entirely</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">'two.sample'</span>, <span class="co">#independent sample t-test</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">alternative =</span> <span class="st">'two.sided'</span>  <span class="co">#two-tailed test</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>             )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Error 2:</strong></p>
<p>I prefer <code>t.test()</code> over <code>independentSamplesTTest()</code> because I’m an R purist, and I wanted to calculate a Cohen’s <em>d</em> value using the <code>t2d()</code> function in the <code>{psych}</code> package. I don’t think it is working properly. I have a <em>t</em>-statistic of <code>5.12</code>and the sample sizes for my two groups are <code>15</code> and <code>22</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load psych</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate cohen's d</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">t2d</span>(<span class="at">t =</span> <span class="fl">5.12</span>, <span class="at">n =</span> <span class="dv">15</span>, <span class="at">n1 =</span> <span class="dv">22</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Error 3</strong></p>
<p>I was trying to plot my data from the first minihack, but I can only see part of my error bars, I want to see all of it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_os, <span class="fu">aes</span>(<span class="at">x=</span>os, <span class="at">y=</span>ability)) <span class="sc">+</span> <span class="co">#create canvas</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_ci, <span class="co">#specify a function to run on your data</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">geom=</span><span class="st">"errorbar"</span>) <span class="sc">+</span> <span class="co">#here is where you specify what geom to use </span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="co">#specify a function to run on your data</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">geom=</span><span class="st">"bar"</span>,  <span class="co">#here is where you specify what geom to use</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill=</span><span class="st">'blue'</span>) <span class="sc">+</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add results of t.test</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_compare_means</span>(<span class="at">method =</span> <span class="st">"t.test"</span>) <span class="sc">+</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">17</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-9_ist_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>